<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>igia-platform / igia-datamask · igia</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;!-- BEGIN adding docusaurus links --&gt;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="igia-platform / igia-datamask · igia"/><meta property="og:type" content="website"/><meta property="og:url" content="http://igia.io/"/><meta property="og:description" content="&lt;!-- BEGIN adding docusaurus links --&gt;"/><meta property="og:image" content="http://igia.io/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="http://igia.io/img/docusaurus.png"/><link rel="shortcut icon" href="/img/igia-favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/igia-bw-inverse.png" alt="igia"/><h2 class="headerTitleWithLogo">igia</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/gettingstarted" target="_self">Documentation</a></li><li class=""><a href="https://docs.google.com/forms/d/e/1FAIpQLSc38F2WK70mqcp3BhXrS6K9p2qTiQFa_ldpN1dCkUwhrk-Zpw/viewform?usp=pp_url&amp;entry.185840096=Send+me+updates+on+igia+releases.&amp;entry.185840096=Send+me+major+announcements+on+igia-related+updates+and+news.&amp;entry.185840096=Please+feel+free+to+contact+me+about+collaboration+or+other+opportunities." target="_self">Stay Informed</a></li><li class=""><a href="https://groups.google.com/forum/#!forum/igia" target="_self">Community</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Tools</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">igia<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/platformoverview">Platform Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/gettingstarted">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture">Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/sampleapp">How To Create An App</a></li><li class="navListItem"><a class="navItem" href="/docs/igia-faq">FAQ</a></li><li class="navListItem"><a class="navItem" href="/docs/contributing">Contributing</a></li><li class="navListItem"><a class="navItem" href="/docs/licensing">Licensing</a></li><li class="navListItem"><a class="navItem" href="/docs/HD">Healthcare Disclaimer</a></li><li class="navListItem"><a class="navItem" href="/docs/hipaa-feature">HIPAA Support</a></li><li class="navListItem"><a class="navItem" href="/docs/components">Component List</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Releases</h4><ul><li class="navListItem"><a class="navItem" href="/docs/release-v031">Release-0.3.1</a></li><li class="navListItem"><a class="navItem" href="/docs/release-v032">Release-0.3.2</a></li><li class="navListItem"><a class="navItem" href="/docs/release-v033">Release-0.3.3</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/known-issues">Known Issues</a></li><li class="navListItem"><a class="navItem" href="/docs/acknowledgements">Acknowledgements</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Sample App<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/cha2ds2-vasc-api~README">Sample App API</a></li><li class="navListItem"><a class="navItem" href="/docs/cha2ds2-vasc-application~README">Sample App UI</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Microservice Platform<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/igia-apigateway~README">Microservice Gateway</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Key Cloak (OAuth)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/igia-keycloak~README">README</a></li><li class="navListItem"><a class="navItem" href="/docs/igia-keycloak~usage">Usage</a></li><li class="navListItem"><a class="navItem" href="/docs/igia-keycloak~introduction">Introduction</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/igia-orchestrator~README">Orchestrator</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">SMART on FHIR<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/smart-on-fhir-feature">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/igia-fhir-api-example~README">FHIR API Example</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">FHIR API HAPI Config</h4><ul><li class="navListItem"><a class="navItem" href="/docs/igia-fhir-autoconfigure~README">README</a></li><li class="navListItem"><a class="navItem" href="/docs/igia-fhir-autoconfigure~usage">Usage</a></li><li class="navListItem"><a class="navItem" href="/docs/igia-fhir-autoconfigure~introduction">Introduction</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">SMART Launch App</h4><ul><li class="navListItem"><a class="navItem" href="/docs/igia-smart-launch-app~README">README</a></li><li class="navListItem"><a class="navItem" href="/docs/igia-smart-launch-app~usage">Usage</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Care Management<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/caremanagement-feature">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/caremanagement~README">Care Management</a></li><li class="navListItem"><a class="navItem" href="/docs/igia-camunda~README">Camunda Workflow Engine</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Data Integration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/integration-app-feature">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/integration-app~README">Data Integration App</a></li><li class="navListItem"><a class="navItem" href="/docs/integration-configuration~README">Data Integration Config</a></li><li class="navListItem"><a class="navItem" href="/docs/integration-worker~README">Data Integration Worker</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tools<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/igia-commons~README">igia Common Libs</a></li><li class="navListItem"><a class="navItem" href="/docs/igia-docs~README">Docs Website</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/igia-datamask~README">Data Masking</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">I2b2 &amp; CDI<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/i2b2-cdi-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/i2b2-cdi-usage">CDI Usage</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">igia-platform / igia-datamask</h1></header><article><div><span><!-- BEGIN adding docusaurus links -->
<p>A software tool for masking PHI and other data in XML and JSON files.<br></p>
<button onclick="window.location.href='/docs/igia-datamask~ACKNOWLEDGEMENTS'">Acknowledgements</button>
<!-- END adding docusaurus links -->
<h1><a class="anchor" aria-hidden="true" id="data-masking-tool"></a><a href="#data-masking-tool" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Data Masking Tool</h1>
<p>A library with command line tool for masking data, such as protected health information (PHI), in XML and JSON files.</p>
<p><a href="https://github.com/igia/igia-datamask/blob/master/LICENSE"><img src="https://img.shields.io/:License-MPL2-blue.svg" alt="License"></a>
<a href="https://github.com/igia/igia-datamask/blob/master/HD.md"><img src="https://img.shields.io/badge/Notice-Healthcare%20Disclaimer-red.svg" alt="Notice"></a></p>
<p>Features include:</p>
<ul>
<li>Mask data from both JSON and XML input files</li>
<li>Multiple files masked at once with consistent masked values, including dates and times.</li>
<li>Optional validation of input file to a JSON or XML schema definition to prevent PHI on unexpected fields to cause PHI &quot;leakage&quot;</li>
<li>Support a wide variety of field type transformations (dates, numerics, text, names, urls, and more).</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="usage"></a><a href="#usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h2>
<h3><a class="anchor" aria-hidden="true" id="building-the-project"></a><a href="#building-the-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Building the project</h3>
<pre><code class="hljs"><span class="hljs-attr">git</span> <span class="hljs-string">clone &lt;repository location&gt;</span>
<span class="hljs-attr">cd</span> <span class="hljs-string">igia-datamask</span>
<span class="hljs-attr">git</span> <span class="hljs-string">checkout develop</span>
<span class="hljs-attr">mvn</span> <span class="hljs-string">clean install</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="running-the-executable-jar"></a><a href="#running-the-executable-jar" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running the executable jar</h3>
<pre><code class="hljs">igia-datamask.sh --mask=type:xml,config:config.xml,in:employees.xml,schema:employees.xsd,out:employees-masked.xml [ --skip-schema-validation ]
igia-datamask.sh --mask=type:json,config:config.xml,in:employees.json,schema:employees.json,out:employees-masked.json [ --skip-schema-validation ]

--mask   
               Can specify multiple --mask options per execution to similarly mask data across files.
               Single complex parameter follows &quot;=&quot;, which includes config:, in:, xsd:, and out: values.
               &quot;config:&quot; parameter is for the masking configuration file which contains field level instructions
               for the specific xml file.
               &quot;in:&quot; parameter is for the input xml file containing PHI.
               &quot;schema:&quot; parameter is for the XSD or JSON file used for validating the input XML file to make sure new fields haven't
               been introduced in the input without being configured in the configuration file.
               &quot;out:&quot; parameter is the file generated by the program and will contain the masked version of
               the input file as instructed via the config file.

 --skip-schema-validation
               Skip the XSD or JSON validation of the input file.  Note that this will mean that changes in the input file
               may introduce PHI leakage if those new fields contain PHI and have not been included in the configuration.
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>The <code>igia-datamask</code> code repository contains sample data masking configuration and input files. Run <code>./run-example.sh</code> in the project root directory after you build the jar file (see Building the project above).</p>
<h3><a class="anchor" aria-hidden="true" id="change-log"></a><a href="#change-log" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Change log</h3>
<pre><code class="hljs">This version contains a moderate refactoring to support JSON in additional to the original XML support.
Adding JSON support triggered changes to configuration file and command line parameters for consistency across file types:
- The --mask parameter now requires a 'type' sub-parameter which can be set to &quot;xml&quot; or &quot;json&quot;.
- The --mask sub-parameter 'xsd' is now 'schema' to reflect that validation schemas may be either XSD or JSON schemas (json schema v4 is supported, see http://json-schema.org).
- The --skip-xsd-validation parameter is now --skip-schema-validation to make is agnostic to xml or json.
- In the xml configuration files, the 'xpath' attribute for &lt;field&gt; is now 'path', e.g. &lt;field path=&quot;...&quot; &gt;.  The path may be an xpath expression for XML files, and a json path expression for JSON files (see http://goessner.net/articles/JsonPath/).
- The &lt;field&gt; 'type' attribute should be set to 'JSON' for JSON files.
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<h3><a class="anchor" aria-hidden="true" id="personal-identifiers-requiring-de-identification"></a><a href="#personal-identifiers-requiring-de-identification" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Personal Identifiers Requiring De-identification</h3>
<p>The following identifiers of the individual or of relatives, employers, or household members of the individual, must be removed according to HIPAA regulations. The following is the status of what may be handled by this library:</p>
<ol>
<li><p>Names;
Use <em>NameTransformer</em> to assign random name from dictionary file.</p></li>
<li><p>Addresses; All geographic subdivisions smaller than a State, including street address, city, county, precinct, zip code, and their equivalent geocodes, except for the initial three digits of a zip code if, according to the current publicly available data from the Bureau of the Census:</p>
<ul>
<li>(1) The geographic unit formed by combining all zip codes with the same three initial digits contains more than 20,000 people; and</li>
<li>(2) The initial three digits of a zip code for all such geographic units containing 20,000 or fewer people is changed to 000.</li>
</ul>
<p>Use <em>TextTransformer</em> to generate random text for address fields of equal length to source, and <em>ZipCodeTransformer</em> to mask the digits of zip.</p></li>
<li><p>Dates; All elements of dates (except year) for dates directly related to an individual, including birth date, admission date, discharge date, date of death; and all ages over 89 and all elements of dates (including year) indicative of such age, except that such ages and elements may be aggregated into a single category of age 90 or older;<br>
Use <em>DateOffsetTransformer</em> to offset dates by random dates and <em>BirthdateTransformer</em> to adjust date of birth to make patient age &lt; 90.</p></li>
<li><p>Telephone numbers;<br>
Use <em>NumericIdentifierTransformer</em> to change phone to (999)999-9999.</p></li>
<li><p>Fax numbers;<br>
Use <em>NumericIdentifierTransformer</em> to change phone to (999)999-9999.</p></li>
<li><p>Electronic mail addresses;<br>
Use <em>EmailTransformer</em> to generate random fake email address.</p></li>
<li><p>Social security numbers;<br>
Use <em>NumericIdentifierTransformer</em> to change SSN to 999-99-9999.</p></li>
<li><p>Medical record numbers;<br>
Use <em>IdentifierTransformer</em> to change hash identifier with common salt to prevent reidentification and maintain references.</p></li>
<li><p>Health plan beneficiary numbers;<br>
Use <em>IdentifierTransformer</em> to change hash identifier with common salt to prevent reidentification and maintain references.</p></li>
<li><p>Account numbers;<br>
Use <em>IdentifierTransformer</em> to change hash identifier with common salt to prevent reidentification and maintain references.</p></li>
<li><p>Certificate/license numbers;<br>
Use <em>IdentifierTransformer</em> to change hash identifier with common salt to prevent reidentification and maintain references.</p></li>
<li><p>Vehicle identifiers and serial numbers, including license plate numbers;<br>
Use <em>IdentifierTransformer</em> to change hash identifier with common salt to prevent reidentification and maintain references.</p></li>
<li><p>Device identifiers and serial numbers;<br>
Use <em>IdentifierTransformer</em> to change hash identifier with common salt to prevent reidentification and maintain references.</p></li>
<li><p>Web Universal Resource Locators (URLs);<br>
Use <em>TextTransformer</em> to generate random text of equal length to source. You may use <em>TokenizeTransformer</em> if the URL contains an identifier previously de-identified in configuration, such as patientId used in a FHIR resource URL, in which case just the id in the URL is replaced consistently with the de-identified patientId value. For example <a href="http://hl7.org/fhir/Patient/12345">http://hl7.org/fhir/Patient/12345</a> where 12345 is a previously de-identified value, might become <a href="http://hl7.org/fhir/Patient/99999">http://hl7.org/fhir/Patient/99999</a>.</p></li>
<li><p>Internet Protocol (IP) address numbers;<br>
User <em>IpAddressTransformer</em> to change IP address to 192.168.1.100 (private non-routable address).</p></li>
<li><p>Biometric identifiers, including finger and voice prints;<br>
This is not handled in XML currently.</p></li>
<li><p>Full face photographic images and any comparable images;<br>
This is not handled in XML currently.</p></li>
<li><p>Any other unique identifying number, characteristic, or code, except as permitted by paragraph (c) of this section;<br>
Use <em>TextTransformer</em> to generate random text of equal length to source for other scenarios.</p></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="configuration"></a><a href="#configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration</h3>
<p>A per source format configuration file must be provided when de-identifying a document.  The source format configuration file is specified in XML format as follows:</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">config</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">namespaces</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">namespace</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">"s"</span> <span class="hljs-attr">url</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/soap/envelope/"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">namespace</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">"i"</span> <span class="hljs-attr">url</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">namespaces</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">fields</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"//employee/@id"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"ATTRIBUTE"</span> <span class="hljs-attr">transform</span>=<span class="hljs-string">"IDENTIFIER"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"//employee/firstName"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"TEXT"</span> <span class="hljs-attr">transform</span>=<span class="hljs-string">"NAME"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"//employee/lastName"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"TEXT"</span> <span class="hljs-attr">transform</span>=<span class="hljs-string">"NAME"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"//department/@id"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"ATTRIBUTE"</span> <span class="hljs-attr">transform</span>=<span class="hljs-string">"NUMERIC_IDENTIFIER"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"//employee/phone"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"TEXT"</span> <span class="hljs-attr">transform</span>=<span class="hljs-string">"NUMERIC_IDENTIFIER"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"//employee/startdate"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"TEXT"</span> <span class="hljs-attr">transform</span>=<span class="hljs-string">"DATE_OFFSET"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">params</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>SIMPLE_DATE_FORMAT<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>MM/dd/yyyy<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">params</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"//employee/zip"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"TEXT"</span> <span class="hljs-attr">transform</span>=<span class="hljs-string">"ZIP_CODE"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"//employee/email"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"TEXT"</span> <span class="hljs-attr">transform</span>=<span class="hljs-string">"EMAIL"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"//employee/dob"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"TEXT"</span> <span class="hljs-attr">transform</span>=<span class="hljs-string">"BIRTHDATE"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">fields</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
</code></pre>
<p>The <code>&lt;namespaces&gt;</code> section is optional and only pertinent when masking XML source documents; it is ignored when processing JSON source documents.  Each specified namespace is preloaded to the XML parser and the prefix values must be used in any xpath expressions evaluating XML content paths covered by that namespace. For example: path=&quot;//s:SoapBody/s:SoapEnvelope&quot;.</p>
<p>The <code>&lt;fields&gt;</code> section specified each field to be masked.  The rules are executed in order, each being processed against the entire source document before moving to the next rule. Order of specification is important only in that (1) there is a global value cache of masked values such that value A transformed to value B in a given transformation, will always be transformed A to B regardless of transformation type, and (2) the <em>TokenizeTransformer</em> will only replace values in a string if the value has previously been transformed in another transformer.</p>
<p>The <code>&lt;field&gt;</code> entity may contain additional params used by the specified transformer type, in key/value format (example <params><entry><key>SIMPLE_DATE_FORMAT</key><value>MM/dd/yyyy</value></entry></params>).</p>
<p>The <code>&lt;field&gt;</code> entity must specify <code>path</code>, <code>type</code>, and <code>transform</code> attributes.  The <code>path</code> attribute must be either (1) an XPath expression for XML source files, or (2) a JSON path expression for JSON source files (see <a href="https://github.com/json-path/JsonPath">https://github.com/json-path/JsonPath</a>). For XML source documents the <code>type</code> attribute may be <code>TEXT</code> or <code>ATTRIBUTE</code>; for JSON source documents the <code>type</code> attribute should be <code>JSON</code>. The following de-identification <code>transform</code> types are supported:</p>
<table>
<thead>
<tr><th>Transform Class</th><th>Config Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>BirthdateTransformer</td><td><code>BIRTHDATE</code></td><td>Uses DateOffsetTransformer plus accounts for age &gt; 90 rule.</td></tr>
<tr><td>DateOffsetTransformer</td><td><code>DATE_OFFSET</code></td><td>Shifts dates and times by a random number of seconds between 10 and 365 days.</td></tr>
<tr><td>EmailTransformer</td><td><code>EMAIL</code></td><td>Matches common email address formats and replaces with random but similar format.</td></tr>
<tr><td>IdentifierTransformer</td><td><code>IDENTIFIER</code></td><td>Changes any field value to a salted MD5 hash of the original value.</td></tr>
<tr><td>IpAddressTransformer</td><td><code>IPADDRESS</code></td><td>Changes any field to <code>127.0.0.1</code>.</td></tr>
<tr><td>NameTransformer</td><td><code>NAME</code></td><td>Changes field values using a supplied nonsensical latin-like name dictionary.</td></tr>
<tr><td>NumericIdentifierTransformer</td><td><code>NUMERIC</code></td><td>Transforms SSN's and phone numbers to replace digits with 9's, or other long number values with random numbers of the same length.</td></tr>
<tr><td>TextTransformer</td><td><code>TEXT</code></td><td>Replaces value with &quot;Lorem ipsum dolor...&quot; text of similar length to the source.</td></tr>
<tr><td>TokenizeTextTransformer</td><td><code>TOKENIZE</code></td><td>Replaces any previously transformed tokens within the input text, while keeping the remaining original text, provided that the source token is a separate delimited value, such as within a paragraph.</td></tr>
<tr><td>UrlTransformer</td><td><code>URL</code></td><td>Replaces any previously transformed tokens within the URL tokens, while keeping the remaining original text, provided that the source token is a separate delimited value.</td></tr>
<tr><td>ZipCodeTransformer</td><td><code>ZIP_CODE</code></td><td>Replaces with 99999 or 99999-9999 or 999999999 depending on source format. Other formats will return an empty string.</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="acknowledgments"></a><a href="#acknowledgments" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Acknowledgments</h2>
<p>We'd like to thank MIT Lincoln Laboratories for sharing their &quot;Data Anonymizer for Public Health Data&quot; (L. Barbieri, M. Deangelus, J. Alekseyev, G. Larocque) (<a href="https://www.ll.mit.edu">https://www.ll.mit.edu</a>), which inspired the data transformation filters of the igia-datamask tool.</p>
<h2><a class="anchor" aria-hidden="true" id="license-and-copyright"></a><a href="#license-and-copyright" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>License and Copyright</h2>
<p>MPL 2.0 w/ HD<br>
See <a href="LICENSE">LICENSE</a> file.<br>
See <a href="/docs/HD">HEALTHCARE DISCLAIMER</a> file.<br>
© <a href="https://www.persistent.com">Persistent Systems, Inc.</a></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 7/29/2019</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/igia-docs~README"><span class="arrow-prev">← </span><span>Docs Website</span></a><a class="docs-next button" href="/docs/i2b2-cdi-overview"><span>Overview</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#usage">Usage</a><ul class="toc-headings"><li><a href="#building-the-project">Building the project</a></li><li><a href="#running-the-executable-jar">Running the executable jar</a></li><li><a href="#example">Example</a></li><li><a href="#change-log">Change log</a></li></ul></li><li><a href="#introduction">Introduction</a><ul class="toc-headings"><li><a href="#personal-identifiers-requiring-de-identification">Personal Identifiers Requiring De-identification</a></li><li><a href="#configuration">Configuration</a></li></ul></li><li><a href="#acknowledgments">Acknowledgments</a></li><li><a href="#license-and-copyright">License and Copyright</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div class="main"><h5><a href="/" class="nav-home"><div class="box"><img src="/img/igia-bw-inverse.png" alt="igia" width="66" height="66"/>    <span style="font-size:3em;font-weight:200">igia</span></div></a></h5><span class="footer-text">Enabling the development, deployment, and sharing of healthcare technology.</span><br/><br/><span class="footer-text small left">Logo Design By <a target="_blank" class="footer-text left" href="https://gillfishmandesign.com">GillFishmanDesign.com</a> Cambridge, Massachusetts</span><br/><br/><span class="footer-text small left">Copyright © 2020</span><br/><span class="footer-text small left">&quot;igia&quot; is a trademark of the igia.io project.</span></div><div><h5>Documentation</h5><a href="/docs/gettingstarted">Getting Started</a><a href="/docs/LICENSE">License</a><a href="/docs/HD">Disclaimer</a><a href="/docs/igia-faq">FAQ</a></div><div><h5>Community</h5><a href="https://groups.google.com/forum/#!forum/igia">Discussion Forum</a><a href="/users.html">Platform Users</a><br/><h5>Contact us at</h5><img src="/img/info-at-igia-io-white.svg" style="height:1.3em"/></div><div><h5>More</h5><a target="_blank" href="https://github.com/igia">GitHub</a><a class="github-button" href="https://github.com/igia/igia-docs" data-icon="octicon-star" data-count-href="/igia.github.io/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'f8534c32f62ecd9bce873d56fb1f9619',
                indexName: 'igia',
                inputSelector: '#search_input_react'
              });
            </script></body></html>